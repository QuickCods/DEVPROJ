<div class="admin-card">
  <div class="admin-card-header">
    <button class="btn-primary" *ngIf="!editing" (click)="startCreate()">Nouvel Utilisateur</button>
  </div>

  <!-- Lista de utilizadores -->
  <div *ngIf="!editing" class="admin-card-body">
    <table class="admin-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Nom</th>
          <th>Courriel</th>
          <th>R√¥le</th>
          <th>Nais.</th>
          <th>NIF</th>
          <th>Adresse</th>
          <th>T√©l√©phone</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let u of users">
          <td>{{ u.id }}</td>
          <td class="ellipsis" [title]="u.fullName">{{ u.fullName }}</td>
          <td class="ellipsis" [title]="u.email">{{ u.email }}</td>
          <td>{{ u.role }}</td>
          <td>{{ u.dateOfBirth }}</td>
          <td>{{ u.nif }}</td>
          <td class="ellipsis" [title]="u.address">{{ u.address }}</td>
          <td>{{ u.phoneNumber }}</td>
          <td class="actions">
            <button class="icon-btn" (click)="startEdit(u)">‚úèÔ∏è</button>
            <button class="icon-btn" (click)="remove(u.id!)">üóëÔ∏è</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Formul√°rio de cria√ß√£o/edi√ß√£o -->
  <div *ngIf="editing" class="admin-form-container">
    <h3>{{ form.value.id ? 'Editar' : 'Cr√©er' }} Utilisateur</h3>
    <form [formGroup]="form" (ngSubmit)="save()">
      <input type="hidden" formControlName="id" />

      <label>Nom <input formControlName="fullName" /></label>
      <label>Date Nais. <input formControlName="dateOfBirth" placeholder="dd/MM/aaaa" /></label>
      <label>NIF <input formControlName="nif" /></label>
      <label>Adresse <input formControlName="address" /></label>
      <label>T√©l√©phone <input formControlName="phoneNumber" /></label>
      <label>Courriel <input formControlName="email" /></label>
      <label>R√¥le
        <select formControlName="role">
          <option>User</option>
          <option>Admin</option>
        </select>
      </label>
      <label *ngIf="!form.value.id">Mot de passe <input type="password" formControlName="password" /></label>

      <div class="form-actions">
        <button type="submit" class="btn-primary" [disabled]="form.invalid">
          {{ form.value.id ? 'Atualizar' : 'Cr√©er' }}
        </button>
        <button type="button" class="btn-secondary" (click)="cancel()">Annuler</button>
      </div>
    </form>
  </div>
</div>
