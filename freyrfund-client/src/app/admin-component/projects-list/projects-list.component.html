<button (click)="startCreate()">Novo Projeto</button>

<!-- Tabela de projetos -->
<table *ngIf="!editing">
  <thead>
    <tr>
      <th>ID</th>
      <th>T√≠tulo</th>
      <th>Descri√ß√£o</th>
      <th>Requerido</th>
      <th>Financiado</th>
      <th>Taxa (%)</th>
      <th>Dura√ß√£o (meses)</th>
      <th>A√ß√µes</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let p of projects">
      <td>{{ p.id }}</td>
      <td>{{ p.title }}</td>
      <p> {{ p.description }}</p>
      <td>{{ p.amountRequired | currency:'EUR':'symbol' }}</td>
      <td>{{ p.returnRate }}%</td>
      <td>{{ p.durationMonths }}</td>
      <td>
        <button (click)="startEdit(p)">‚úèÔ∏è</button>
        <button
          (click)="remove(p.id!)"
          [disabled]="removingId === p.id"
        >
          {{ removingId === p.id ? 'Removendo‚Ä¶' : 'üóëÔ∏è' }}
        </button>
      </td>
    </tr>
  </tbody>
</table>

<!-- Formul√°rio de cria√ß√£o/edi√ß√£o -->
<div *ngIf="editing">
  <h3>{{ form.value.id ? 'Editar' : 'Criar' }} Projeto</h3>
  <form [formGroup]="form" (ngSubmit)="save()">
    <!-- ID oculto para edi√ß√£o -->
    <input type="hidden" formControlName="id">

    <label>
      T√≠tulo
      <input formControlName="title" />
    </label>
    <div *ngIf="form.get('title')?.invalid && form.touched">
      T√≠tulo obrigat√≥rio.
    </div>

    <label>
      Descri√ß√£o
      <textarea formControlName="description"></textarea>
    </label>
    <div *ngIf="form.get('description')?.invalid && form.touched">
      Descri√ß√£o obrigat√≥ria.
    </div>

    <label>
      Montante Requerido
      <input type="number" formControlName="amountRequired" />
    </label>
    <div *ngIf="form.get('amountRequired')?.invalid && form.touched">
      Montante requerido obrigat√≥rio e &gt; 0.
    </div>

    <label>
      Montante Financiado
      <input
        type="number"
        formControlName="amountFunded"
        [readonly]="true"
        placeholder="(ser√° calculado no servidor)"
      />
    </label>

    <label>
      Taxa de Retorno (%)
      <input type="number" formControlName="returnRate" />
    </label>
    <div *ngIf="form.get('returnRate')?.invalid && form.touched">
      Taxa de retorno obrigat√≥ria.
    </div>

    <label>
      Dura√ß√£o (meses)
      <input type="number" formControlName="durationMonths" />
    </label>
    <div *ngIf="form.get('durationMonths')?.invalid && form.touched">
      Dura√ß√£o obrigat√≥ria e &gt; 0.
    </div>

    <button type="submit" [disabled]="form.invalid">
      {{ form.value.id ? 'Atualizar' : 'Criar' }}
    </button>
    <button type="button" (click)="cancel()">Cancelar</button>
  </form>
</div>
