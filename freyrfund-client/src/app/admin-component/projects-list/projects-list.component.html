<!-- projects.component.html -->
<div class="admin-card">
  <div class="admin-card-header">
    <button class="btn-primary" (click)="startCreate()">Novo Projeto</button>
  </div>

  <div *ngIf="!editing" class="admin-card-body">
    <table class="admin-table">
      <thead>
        <tr>
          <th>ID</th><th>T√≠tulo</th><th>Descri√ß√£o</th>
          <th>Requerido</th><th>Taxa</th><th>Dura√ß√£o</th><th>A√ß√µes</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let p of projects">
          <td>{{p.id}}</td>
          <td>{{p.title}}</td>
          <td class="desc-cell">{{p.description}}</td>
          <td>{{p.amountRequired | currency:'EUR':'symbol'}}</td>
          <td>{{p.returnRate}}%</td>
          <td>{{p.durationMonths}}</td>
          <td class="actions">
            <button class="icon-btn" (click)="startEdit(p)">‚úèÔ∏è</button>
            <button class="icon-btn" (click)="remove(p.id!)" 
                    [disabled]="removingId===p.id">
              {{ removingId===p.id ? 'Removendo‚Ä¶' : 'üóëÔ∏è' }}
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="editing" class="admin-form-container">
    <h3>{{ form.value.id ? 'Editar' : 'Criar' }} Projeto</h3>
    <form [formGroup]="form" (ngSubmit)="save()">
      <input type="hidden" formControlName="id" />

      <label>
        T√≠tulo
        <input formControlName="title" />
      </label>
      <label>
        Descri√ß√£o
        <textarea formControlName="description"></textarea>
      </label>
      <label>
        Montante Requerido
        <input type="number" formControlName="amountRequired" />
      </label>
      <label>
        Taxa de Retorno (%)
        <input type="number" formControlName="returnRate" />
      </label>
      <label>
        Dura√ß√£o (meses)
        <input type="number" formControlName="durationMonths" />
      </label>

      <div class="form-actions">
        <button type="submit" class="btn-primary" [disabled]="form.invalid">
          {{ form.value.id ? 'Atualizar' : 'Criar' }}
        </button>
        <button type="button" class="btn-secondary" (click)="cancel()">Cancelar</button>
      </div>
    </form>
  </div>
</div>
